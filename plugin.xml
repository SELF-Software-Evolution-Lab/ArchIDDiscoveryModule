<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
 	<extension point="org.eclipse.ui.menus">
	    <menuContribution locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
       <menu
             label="Archtoring"
             mnemonic="A"
             tooltip="Refactoring steps">
          <command
                commandId="archtoring.commands.Model"
                label="Extract model"
                mnemonic="M"
                style="push">
          </command>
          <command
                commandId="archtoring.commands.Patterns"
                label="Run Search"
                mnemonic="S"
                style="push">
          </command>
          <command
                commandId="archtoring.commands.Generation"
                label="Convert to Source"
                mnemonic="G"
                style="push">
             <visibleWhen>
                <with
                      variable="activeMenuSelection">
                   <iterate
                         ifEmpty="false">
                      <adapt
                            type="org.eclipse.core.resources.IResource">
                         <test
                               property="org.eclipse.core.resources.name"
                               value="*.xmi">
                         </test>
                      </adapt>
                   </iterate>
                </with>
             </visibleWhen>
          </command>
       </menu>
	    </menuContribution>
  	</extension>
  	<extension point="org.eclipse.ui.commands">
		<command
			defaultHandler="archtoring.handlers.ModelHandler"
			id="archtoring.commands.Model"
			name="Model">
	  	</command>
	  	<command
			defaultHandler="archtoring.handlers.ModelHandler"
			id="archtoring.commands.Patterns"
			name="Search">
	  	</command>
	  	<command
			defaultHandler="archtoring.handlers.GenerationHandler"
			id="archtoring.commands.Generation"
			name="Transform">
	  	</command>
	</extension>
</plugin>
